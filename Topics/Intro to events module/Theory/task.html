<div class="step-text">
<p>In this topic, we will touch on the asynchronous event-driven architecture of Node.js. We will consider such a pattern as an emitter and a listener for some events. Also, we will figure out a specific implementation of these patterns using the events module.</p>
<h5 id="event-driven-model">Event-driven model</h5>
<p>First, you should understand that an <strong>event</strong> is a signal that something has happened. A named event (signal) can be generated by a special object called an <strong>emitter</strong>. Obviously, there must be special objects that react to these events, otherwise, the events will simply be ignored and nothing will happen. Objects that respond to events are called event <strong>listeners</strong>.</p>
<p>In fact, this model is quite simple. For example, consider an abstract example. When a person clicks on the submit button of the registration form, the event is a click on the button. Event listener register for a button click and then, for example, redirect you to a new page or pop up a modal window indicating that everything was sent successfully.</p>
<h5 id="eventemitter-basic-syntax">EventEmitter basic syntax</h5>
<p>Let's look at the following simple example of using the event module:</p>
<pre><code class="language-javascript">const EventEmitter = require('node:events');

const myEmitter = new EventEmitter();

myEmitter.on('eventExample', () =&gt; {
  console.log('The event was detected!');
});

myEmitter.emit('eventExample');</code></pre>
<p>Let's take a closer look at the above code. First, we imported the EventEmitter class from the events module.</p>
<p></p><div class="alert alert-primary">We capitalized the EventEmitter because it is a class. With the help of this syntax, we understand that we have a class in front of us, and not a function or some kind of variable.</div>
<p>In the following lines, we have created an instance of the EventEmitter class. Then the most interesting part begins. With the <code class="language-javascript">on</code> method, we add a listener function for the event named <code class="language-javascript">eventExample</code>. We passed the name of the event as the first parameter and the callback (<strong>event handler</strong>) as the second one.</p>
<p>If we don't write the last line, nothing will happen. It's because the <code class="language-javascript">on</code> method has just created an event listener, but no event has happened yet. In order to generate an event, you need to use the <code class="language-javascript">emit</code> method. As the first argument, we passed the name of the event we want to trigger. The subsequent arguments are optional, but they can be passed if it is necessary.</p>
<p>It is in the above sequence that the <code class="language-javascript">on</code> and <code class="language-javascript">emit</code> methods should be used. If we emit an event first and then create an event listener, nothing will happen because the event was emitted before.</p>
<h5 id="user-logging">User logging</h5>
<p>Let's look at a more complicated example where we have to log user data. Consider the following example:</p>
<pre><code class="language-javascript">const EventEmitter = require('node:events');

class LogEmitter extends EventEmitter {}

const logger = new LogEmitter();

logger.on('logging', (name) =&gt; {
    const date = new Date();
    console.log(`User ${name} was registered at ${date.toISOString()}`);
})

logger.emit('logging', 'Alex');</code></pre>
<p>In this example, we have created our own <code class="language-javascript">LogEmitter</code> class, which is inherited from the imported <code class="language-javascript">EventEmitter</code> class. This is important for task decomposition, since creating multiple instances of the same <code class="language-javascript">EventEmitter</code> class can cause emitters to work incorrectly. By creating a custom class, we separated the logic of logging from the rest of the program.</p>
<p>Also, in this case, we are passing the <code class="language-javascript">'Alex'</code> argument to the callback when using the emit method. The <code class="language-javascript">date</code> constant is used to log not only the username but also the time, which is logical.</p>
<p>Executing this code will output the following:</p>
<pre><code class="language-javascript">User Alex was registered at 2022-10-22T10:31:37.174Z</code></pre>
<h5 id="conclusion">Conclusion</h5>
<p>In this topic, you've learned the principle of asynchronous event-driven architecture. You've also found out the practical application of the event listener and emitter patterns using the events module. In part, you have studied the use of a custom class, anticipating the problems of using multiple instances of the same class.</p>
</div>